<hr>
<button type="button" class="btn btn-info btn-lg pull-right" data-toggle="modal" data-target="#addNewUser"> Add New </button>

<h2>All Users</h2>
<span class="clearfix"></span>
<hr>

<table class="table table-striped table-hover">
    <tr>
        <th>ID</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Username</th>
        <th>Email</th>
        <th>Role</th>
        <th>Edit</th>
        <th>Delete</th>
    </tr>
    <tr ng-repeat="user in vm.allUsers">
        <td>{{user.id}}</td>
        <td>{{user.firstName}}</td>
        <td>{{user.lastName}}</td>
        <td>{{user.username}}</td>
        <td>{{user.emailAddress}}</td>
        <td>{{user.role}}</td>
        <td><button type="button" class="btn btn-info" data-toggle="modal" data-target="#editUser" ng-click="selectUser(user)">Edit</button></td>
        <td><button type="button" class="btn btn-dander" data-toggle="modal" data-target="#deleteUser" ng-click="selectUser(user)">Delete</button></td>
    </tr>
</table>

<!-- Add New User Modal -->
<div class="modal fade" id="addNewUser" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">New User Registration</h4>
        </div>
        <div class="modal-body">
            <form class="form-horizontal">
                <div class="form-group">
                    <div class="col-md-4" ng-class="{ 'has-error': form.firstName.$dirty && form.firstName.$error.required }">
                        <label class="float-left" for="username">First name</label>
                        <input type="text" name="firstName" id="firstName" class="form-control" ng-model="newUser.firstName" placeholder="First Name" required />
                        <span ng-show="form.firstName.$dirty && form.firstName.$error.required" class="help-block">First name is required</span>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-4" ng-class="{ 'has-error': form.lastName.$dirty && form.lastName.$error.required }">
                        <label class="float-left" for="username">Last name</label>
                        <input type="text" name="lastName" id="lastName" class="form-control" ng-model="newUser.lastName" placeholder="Last Name" required />
                        <span ng-show="form.lastName.$dirty && form.lastName.$error.required" class="help-block">Last name is required</span>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-4" ng-class="{ 'has-error': form.username.$dirty && form.username.$error.required }">
                        <label class="float-left" for="username">Username</label>
                        <input type="text" name="username" id="username" class="form-control" ng-model="newUser.username" placeholder="Username" required />
                        <span ng-show="form.username.$dirty && form.username.$error.required" class="help-block">Username is required</span>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-4" ng-class="{ 'has-error': form.emailAddress.$dirty && form.emailAddress.$error.required }">
                        <label class="float-left" for="username">Email</label>
                        <input type="email" name="emailAddress" id="emailAddress" class="form-control" ng-model="newUser.emailAddress" placeholder="Email" required />
                        <span ng-show="form.emailAddress.$dirty && form.emailAddress.$error.required" class="help-block">Email is required</span>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-4" ng-class="{ 'has-error': form.password.$dirty && form.password.$error.required }">
                        <label class="float-left" for="password">Password</label>
                        <input type="password" name="password" id="password" class="form-control" ng-model="newUser.password" placeholder="Password" required />
                        <span ng-show="form.password.$dirty && form.password.$error.required" class="help-block">Password is required</span>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-4" ng-class="{ 'has-error': form.verifyPassword.$dirty && form.verifyPassword.$error.required }">
                        <label class="float-left" for="verifyPassword">Verify Password</label>
                        <input type="verifyPassword" name="verifyPassword" id="verifyPassword" class="form-control" ng-model="newUser.verifyPassword" placeholder="Verify Password" required />
                        <span ng-show="form.verifyPassword.$dirty && form.verifyPassword.$error.required" class="help-block">Password is required</span>
                    </div>
                </div>
                <div class="form-group"> 
                    <div class="col-sm-offset-2 col-sm-10">
                    <button type="submit" class="btn btn-default" ng-click="saveUser()">Save</button>
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
        </div>
        
    </div>
</div>

<!-- Edit User Modal -->
<div class="modal fade" id="editUser" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Edit User</h4>
        </div>
        <div class="modal-body">
            <form class="form-horizontal">
                <div class="form-group">
                    <label class="float-left" for="username">First name</label>
                    <input type="text" name="firstName" id="firstName" class="form-control" ng-model="clickedUser.firstName" placeholder="First Name" required />
                </div>
                <div class="form-group">
                    <label class="float-left" for="username">Last name</label>
                    <input type="text" name="lastName" id="lastName" class="form-control" ng-model="clickedUser.lastName" placeholder="Last Name" required />
                </div>
                <div class="form-group">
                    <label class="float-left" for="username">Username</label>
                    <input type="text" name="username" id="username" class="form-control" ng-model="clickedUser.username" placeholder="Username" required />
                </div>
                <div class="form-group">
                    <label class="float-left" for="username">Email</label>
                    <input type="email" name="emailAddress" id="emailAddress" class="form-control" ng-model="clickedUser.emailAddress" placeholder="Email" required />
                </div>
                <div class="form-group"> 
                    <div class="col-sm-offset-2 col-sm-10">
                    <button type="submit" class="btn btn-default" ng-click="updateUser()" data-dismiss="modal">Save</button>
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
        </div>
        
    </div>
</div>

<!-- Delete User Modal -->
<div class="modal fade" id="deleteUser" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Are You Sure?</h4>
        </div>
        <div class="modal-body">
            <strong style="color: #ff0000;">
                You are about to delete {{clickedUser.username}}
            </strong>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Yes</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">No</button>
        </div>
        </div>
        
    </div>
</div>